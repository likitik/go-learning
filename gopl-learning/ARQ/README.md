## ARQ

\1.   自动重传请求（ARQ）是OSI模型中数据链路层和传输层的错误纠正协议之一

\2.   通过使用确认和超时这两个机制，在不可靠服务的基础上实现可靠的信息传输

\3.   ARQ

a)   停等ARQ

b)   连续ARQ

​         i.     GBN-ARQ

​        ii.     SR-ARQ

## 停止等待协议

\1.   确保信息不因丢包或包乱序而丢失，是最简单的自动重传请求方法，滑动窗口W = 1。

\2.   发送端只有收到序号正确的确认帧 ACKn 后，才更新发送状态变量 V(S)一次，并发送新的数据帧。

a)   ACKn 表示“第 n – 1 号帧已经收到，现在期望接收第 n 号帧

\3.   接收端接收到数据帧时，就要将发送序号 N(S) 与本地的接收状态变量 V(R) 相比较。

a)   若二者相等就表明是新的数据帧，就收下，并发送确认。

b)   否则为重复帧，就必须丢弃。但这时仍须向发送端发送确认帧 ACKn，而接收状态变量 V(R) 和确认序号 n 都不变。

\4.   传输效率

a)   Tf ：发送时延（数据帧长度L / 发送速率（bit/s））

b)   Tp ：传播时延

c)   发送方每发完一个帧都要等待接收方返回ack才能继续发下一个帧，那么等待时长就是传播时延*2，总用时Tf + 2*Tp

d)   信道利用率：Tf /（Tf + 2*Tp）

## 滑动窗口协议

\1.   允许发送方发送多个连续的帧，无需等待应答。

\2.   接收方有一个窗口，窗口大小固定为W个帧大小，发送方可以发送连续的帧到接收方，发送方在收到应答信号以前窗口位置不移动。

\3.   接收方在收到一个帧后（表明没有后续的帧，已经接收完毕），发送应答信号，并将窗口移动到W-i+1位置，表明i之前的帧已经接收完毕。

\4.   传输效率：

a)   E=W*Tf/(Tf+2Tp)

## GBN协议

\1.   发送窗口>1，接收窗口=1

\2.   发送方

a)   在发完一个数据帧后，连续发送若干个数据帧，即使在连续发送过程中收到了接收方发来的应答帧，也可以继续发送。

b)   设置超时定时器。只要在所设置的超时时间内仍收到确认帧，就要重发相应的数据帧(该帧之后的所有帧)

\3.   接受方

a)   只允许按顺序接受帧。

b)   在连续收到好几个正确的确认帧后，只对最后一个数据帧发确认信息。

c)   对某一数据帧的确认就表明该数据帧和这以前所有的数据帧均已正确无误地收到了。

## SR选择重传协议

\1.   发送窗口>1,接受窗口>1

\2.   接收方发现某帧出错后，其后继续送来的正确的帧存放在一个缓冲区中，同时要求发送方重新传送出错的那一帧。

\3.   一旦收到重新传来的帧后，就可以原已存于缓冲区中的其余帧一并按正确的顺序递交上层